<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Photo Gallery | Jhajjar Chess Association</title>
    <meta name="description"
        content="Photos from recent chess tournaments, award ceremonies, and events organized by JCA. See the chess community in action.">
    <meta name="keywords" content="Chess Photos, Tournament Gallery, Jhajjar Chess Images, Chess Events Photos">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://jhajjarchess.com/gallery.html">

    <!-- Favicon -->
    <link rel="icon" href="logo.png" type="image/png">
    <link rel="apple-touch-icon" href="logo.png">

    <!-- Open Graph -->
    <meta property="og:title" content="Photo Gallery | Jhajjar Chess Association">
    <meta property="og:description" content="See the chess community in action. Photos from recent tournaments.">
    <meta property="og:image" content="https://jhajjarchess.com/logo.png">
    <meta property="og:url" content="https://jhajjarchess.com/gallery.html">

    <link rel="stylesheet" href="css/style.css?v=3">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        /* Gallery Grid & Item Styles */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            /* 3-4 images per row */
            gap: 20px;
            margin-bottom: 40px;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            height: 220px;
            /* Fixed smaller height */
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        /* Hover Glow Effect */
        .gallery-item:hover {
            transform: translateY(-5px);
            border-color: var(--primary-gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .gallery-item:hover .gallery-overlay {
            transform: translateY(0);
        }

        .gallery-info h3 {
            color: var(--primary-gold);
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .gallery-info p {
            color: #fff;
            font-size: 0.85rem;
        }

        /* Lightbox Styles */
        .lightbox {
            display: none;
            /* Hidden by default */
            position: fixed;
            z-index: 10000;
            /* Increased Z-index */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.95);
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 80vh;
            border: 2px solid var(--primary-gold);
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .lightbox-caption {
            margin-top: 15px;
            color: #fff;
            text-align: center;
            font-size: 1.1rem;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .lightbox-close:hover {
            color: var(--primary-gold);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 16px;
            cursor: pointer;
            font-size: 20px;
            border-radius: 50%;
            transition: 0.3s;
        }

        .lightbox-nav:hover {
            background: var(--primary-gold);
            color: #000;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }
    </style>
</head>

<body class="luxury-dark-theme">

    <div class="cursor-follower"></div>


    <header class="glass-header">
        <div class="container navbar">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="JCA Logo">
                Jhajjar Chess Association
            </a>
            <div class="mobile-menu-btn"><i class="fa-solid fa-bars"></i></div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="calendar.html">Tournaments</a></li>
                    <li><a href="results.html">Results</a></li>
                    <li><a href="gallery.html" class="active">Gallery</a></li>
                    <li><a href="top-players.html">Top Talents</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="section-padding" style="padding-top: 150px;">
        <div class="container text-center">
            <h1 class="glitch-text" style="font-size: 4rem;">PHOTO <span class="text-gold">GALLERY</span></h1>
            <p style="color: var(--text-muted); font-size: 1.2rem;">Capturing memorable moments from our
                tournaments.
            </p>
        </div>
    </section>

    <!-- Gallery Content -->
    <section class="section-padding">
        <div class="container" id="gallery-container">
            <!-- Tournament galleries will be loaded here dynamically -->
        </div>
    </section>

    <!-- Lightbox - Simplified -->
    <div id="lightbox"
        style="display:none; position:fixed; z-index:99999; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.95); justify-content:center; align-items:center;">
        <span onclick="closeLightbox()"
            style="position:absolute; top:20px; right:40px; color:white; font-size:40px; cursor:pointer; z-index:100000;">&times;</span>
        <img id="lightbox-img" style="max-width:90%; max-height:85vh; border:3px solid #d4af37; border-radius:8px;">
        <div id="lightbox-caption"
            style="position:absolute; bottom:30px; color:white; text-align:center; font-size:1.2rem; width:100%;">
        </div>
        <button onclick="changeImage(-1)"
            style="position:absolute; left:20px; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.7); color:white; border:none; padding:20px; font-size:24px; cursor:pointer; border-radius:5px;">&#10094;</button>
        <button onclick="changeImage(1)"
            style="position:absolute; right:20px; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.7); color:white; border:none; padding:20px; font-size:24px; cursor:pointer; border-radius:5px;">&#10095;</button>
    </div>


    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>Jhajjar Chess Association</h3>
                    <p>Empowering minds through the royal game. <br>
                        <a href="https://www.haryanachess.com" target="_blank"
                            style="color: var(--primary-gold); text-decoration: none; font-weight: bold;">
                            <i class="fa-solid fa-link"></i> Affiliated with Haryana Chess Association
                        </a>
                    </p>
                    <div class="footer-social">
                        <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="#"><i class="fa-brands fa-instagram"></i></a>
                        <a href="#"><i class="fa-brands fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="calendar.html">Tournaments</a></li>
                        <li><a href="results.html">Results</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="top-players.html">Top Talents</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contact Info</h3>
                    <p><i class="fa-solid fa-location-dot"></i> House No. 77/2, Ward no. 6, Mohalla teela, JHAJJAR
                        124103</p>
                    <p><i class="fa-solid fa-envelope"></i> chessassociation.jhajjar@gmail.com</p>
                    <p><i class="fa-solid fa-phone"></i> +91 9416273230</p>
                </div>
            </div>

            <!-- Developer Credits -->
            <div
                style="margin-top: 40px; padding-top: 30px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center;">
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 10px;">Developed by</p>
                <h4 style="color: var(--primary-gold); font-size: 1.2rem; margin-bottom: 15px; letter-spacing: 2px;">
                    WEBXDEVELOPER</h4>
                <div
                    style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; color: var(--text-muted); font-size: 0.85rem;">
                    <p><i class="fa-solid fa-phone" style="color: var(--primary-gold); margin-right: 5px;"></i> +91
                        9911298836 | +91 8307136089</p>
                    <p><i class="fa-solid fa-envelope" style="color: var(--primary-gold); margin-right: 5px;"></i>
                        yasshmittal3@gmail.com | sukritikashyap0028@gmail.com</p>
                </div>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 10px;">
                    <i class="fa-solid fa-location-dot" style="color: var(--primary-gold); margin-right: 5px;"></i>
                    BH-73 East Shalimar Bagh, Delhi - 110088
                </p>
            </div>

            <div class="copyright">
                <p>&copy; 2024 Jhajjar Chess Association. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // --- Load Gallery Data ---
        function loadGallery() {
            const galleryContainer = document.getElementById('gallery-container');

            // Default Data (Fallback)
            const defaultGalleryData = [
                {
                    id: 1,
                    name: "District Championship 2024",
                    photos: [
                        { id: 101, url: "https://images.unsplash.com/photo-1529699211952-734e80c4d42b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Opening Ceremony" },
                        { id: 102, url: "https://images.unsplash.com/photo-1586165368502-1bad197a6461?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Final Match" },
                        { id: 103, url: "https://images.unsplash.com/photo-1560174038-da43ac74f01b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Prize Distribution" },
                        { id: 104, url: "https://images.unsplash.com/photo-1611195974226-ef4f6ab0f4e9?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Group Photo" }
                    ]
                },
                {
                    id: 2,
                    name: "Summer Rapid 2024",
                    photos: [
                        { id: 201, url: "https://images.unsplash.com/photo-1580541832626-2a7131ee809f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Intense Game" },
                        { id: 202, url: "https://images.unsplash.com/photo-1528819622765-d6bcf132f793?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Winner" },
                        { id: 203, url: "https://images.unsplash.com/photo-1604078883732-725b6c2f0e30?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Participants" }
                    ]
                },
                {
                    id: 3,
                    name: "Winter Blitz Cup 2023",
                    photos: [
                        { id: 301, url: "https://images.unsplash.com/photo-1609710228159-0fa9bd7c0827?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Tournament Hall" },
                        { id: 302, url: "https://images.unsplash.com/photo-1628840042765-356cda07504e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Blitz Action" },
                        { id: 303, url: "https://images.unsplash.com/photo-1606092195730-5d7b9af1efc5?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Champions" },
                        { id: 304, url: "https://images.unsplash.com/photo-1571902943202-507ec2618e8f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Closing Ceremony" }
                    ]
                },
                {
                    id: 4,
                    name: "State Championship 2023",
                    photos: [
                        { id: 401, url: "https://images.unsplash.com/photo-1560174038-da43ac74f01b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "State Level Competition" },
                        { id: 402, url: "https://images.unsplash.com/photo-1611195974226-ef4f6ab0f4e9?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Top Players" },
                        { id: 403, url: "https://images.unsplash.com/photo-1604078883732-725b6c2f0e30?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80", caption: "Award Ceremony" }
                    ]
                }
            ];

            // Get Data from LocalStorage (New V2 Key)
            let galleryData = localStorage.getItem('jca_gallery_v2');

            if (!galleryData) {
                // If no V2 data, use defaults and save
                galleryData = defaultGalleryData;
                localStorage.setItem('jca_gallery_v2', JSON.stringify(defaultGalleryData));
            } else {
                galleryData = JSON.parse(galleryData);
            }

            galleryContainer.innerHTML = '';

            // Prepare a flat list of all images for lightbox navigation
            window.galleryImages = [];
            galleryData.forEach(tournament => {
                tournament.photos.forEach(photo => {
                    window.galleryImages.push({
                        image: photo.url,
                        caption: photo.caption,
                        tournament: tournament.name
                    });
                });
            });

            let globalIndexCounter = 0;

            // Render Tournaments (Preserving Order)
            galleryData.forEach(tournament => {
                if (tournament.photos.length === 0) return; // Skip empty tournaments

                const section = document.createElement('div');
                section.className = 'tournament-section';

                // Tournament Header
                const header = document.createElement('h2');
                header.className = 'section-title';
                header.style.textAlign = 'left';
                header.style.marginBottom = '30px';
                header.style.fontSize = '2rem';
                header.innerHTML = `<span class="text-gold">${tournament.name}</span>`;

                // Photo Grid
                const grid = document.createElement('div');
                grid.className = 'gallery-grid';

                tournament.photos.forEach(photo => {
                    const currentIndex = globalIndexCounter++; // Capture current index

                    // Using inline onclick for maximum reliability
                    const item = document.createElement('div');
                    item.className = 'gallery-item glass-card';
                    // Add onclick directly to the wrapper
                    item.setAttribute('onclick', `openLightbox(${currentIndex})`);

                    item.innerHTML = `
                        <img src="${photo.url}" alt="${photo.caption}">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h3>${tournament.name}</h3>
                                <p>${photo.caption}</p>
                            </div>
                        </div>
                    `;

                    grid.appendChild(item);
                });

                section.appendChild(header);
                section.appendChild(grid);
                galleryContainer.appendChild(section);

                // GSAP Animation
                gsap.from(section, {
                    scrollTrigger: {
                        trigger: section,
                        start: 'top 80%',
                        once: true
                    },
                    opacity: 0,
                    y: 50,
                    duration: 0.8,
                    ease: 'power2.out'
                });
            });

            // Refresh ScrollTrigger
            ScrollTrigger.refresh();
        }

        // Lightbox functionality - Simplified and Global
        let currentImageIndex = 0;

        window.openLightbox = function (index) {
            console.log("Opening lightbox for index:", index);

            const images = window.galleryImages;
            if (!images || !images[index]) {
                console.error("Image not found for index:", index);
                alert("Error: Image data not found!");
                return;
            }

            currentImageIndex = index;
            const lightbox = document.getElementById('lightbox');
            const img = document.getElementById('lightbox-img');
            const caption = document.getElementById('lightbox-caption');

            img.src = images[index].image;
            caption.innerHTML = `<strong>${images[index].tournament}</strong><br>${images[index].caption || ''}`;

            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        };

        window.closeLightbox = function () {
            document.getElementById('lightbox').style.display = 'none';
            document.body.style.overflow = 'auto';
        };

        window.changeImage = function (direction) {
            const images = window.galleryImages;
            if (!images || images.length === 0) return;

            currentImageIndex += direction;

            if (currentImageIndex < 0) currentImageIndex = images.length - 1;
            if (currentImageIndex >= images.length) currentImageIndex = 0;

            const img = document.getElementById('lightbox-img');
            const caption = document.getElementById('lightbox-caption');

            img.src = images[currentImageIndex].image;
            caption.innerHTML = `<strong>${images[currentImageIndex].tournament}</strong><br>${images[currentImageIndex].caption || ''}`;
        };

        // Close on background click
        document.getElementById('lightbox').addEventListener('click', (e) => {
            if (e.target.id === 'lightbox') closeLightbox();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            const lightbox = document.getElementById('lightbox');
            if (lightbox.style.display === 'flex') {
                if (e.key === 'Escape') closeLightbox();
                if (e.key === 'ArrowLeft') changeImage(-1);
                if (e.key === 'ArrowRight') changeImage(1);
            }
        });

        // Load gallery on page load
        document.addEventListener('DOMContentLoaded', loadGallery);
    </script>
</body>

</html>